name: Auto-create PR for purge venv branch

on:
  push:
    branches:
      - 'security/purge-venv-history'

jobs:
  create-pr:
    runs-on: ubuntu-latest
    steps:
      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v5
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          title: "chore(security): purge document-service/venv and add docs"
          body: |
            This PR contains:

            - Workflow to safely purge `document-service/venv` from history
            - `docs/history-rewrite.md` with instructions
            - `CONTRIBUTING.md` and branch-protection improvements

            Please review and merge when checks pass.
          base: main
          head: security/purge-venv-history
          labels: security, automation
          draft: false
