[program:esppd-queue-default]
process_name=%(program_name)s_%(process_num)02d
command=php /var/www/esppd/artisan queue:work redis --queue=default --tries=3 --timeout=300 --max-jobs=1000 --max-time=3600
autostart=true
autorestart=true
numprocs=2
redirect_stderr=true
stdout_logfile=/var/www/esppd/storage/logs/queue-default.log
stopasgroup=true
killasgroup=true
environment=APP_ENV=production

[program:esppd-queue-notifications]
process_name=%(program_name)s_%(process_num)02d
command=php /var/www/esppd/artisan queue:work redis --queue=notifications --tries=5 --timeout=120 --max-jobs=5000 --max-time=3600
autostart=true
autorestart=true
numprocs=1
redirect_stderr=true
stdout_logfile=/var/www/esppd/storage/logs/queue-notifications.log
stopasgroup=true
killasgroup=true
environment=APP_ENV=production

[program:esppd-queue-imports]
process_name=%(program_name)s_%(process_num)02d
command=php /var/www/esppd/artisan queue:work redis --queue=imports --tries=2 --timeout=600 --max-jobs=500 --max-time=3600
autostart=true
autorestart=true
numprocs=1
redirect_stderr=true
stdout_logfile=/var/www/esppd/storage/logs/queue-imports.log
stopasgroup=true
killasgroup=true
environment=APP_ENV=production

[program:esppd-queue-reports]
process_name=%(program_name)s_%(process_num)02d
command=php /var/www/esppd/artisan queue:work redis --queue=reports --tries=3 --timeout=600 --max-jobs=500 --max-time=3600
autostart=true
autorestart=true
numprocs=1
redirect_stderr=true
stdout_logfile=/var/www/esppd/storage/logs/queue-reports.log
stopasgroup=true
killasgroup=true
environment=APP_ENV=production

[group:esppd-queue]
programs=esppd-queue-default,esppd-queue-notifications,esppd-queue-imports,esppd-queue-reports
priority=999
